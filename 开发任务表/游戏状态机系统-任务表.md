# 游戏状态机系统 - 开发任务表

> **系统名称**：游戏状态机系统  
> **负责人**：待定  
> **开始日期**：待定  
> **预计完成**：8天

---

## 🔴 紧急重要（P0）- 5条记录

| ☐ | 任务ID | 任务描述 | 任务执行人 | 进度 | 开始日期 | 预计完成日期 | 实际完成日期 | 备注 | 查看详情 |
|---|--------|----------|------------|------|----------|--------------|--------------|------|----------|
| ☐ | T-001 | 项目初始化与文件夹结构搭建 | 待定 | 🔘未开始 | - | - | - | 创建Godot项目、设置分辨率、输入映射 | [详情](#t-001) |
| ☐ | T-002 | GameManager.gd 状态机核心 | 待定 | 🔘未开始 | - | - | - | 状态枚举、切换逻辑、信号 | [详情](#t-002) |
| ☐ | T-003 | SceneManager.gd 场景管理器 | 待定 | 🔘未开始 | - | - | - | 异步加载、场景切换 | [详情](#t-003) |
| ☐ | T-004 | BaseGameState.gd 状态基类 | 待定 | 🔘未开始 | - | - | - | enter/exit/update/handle_input | [详情](#t-004) |
| ☐ | T-005 | BootScene 启动场景 | 待定 | 🔘未开始 | - | - | - | Logo显示、资源加载、跳过功能 | [详情](#t-005) |

---

## 🟠 紧急不重要（P1）- 4条记录

| ☐ | 任务ID | 任务描述 | 任务执行人 | 进度 | 开始日期 | 预计完成日期 | 实际完成日期 | 备注 | 查看详情 |
|---|--------|----------|------------|------|----------|--------------|--------------|------|----------|
| ☐ | T-006 | LoadingScreen 加载界面 | 待定 | 🔘未开始 | - | - | - | 进度条、加载提示、背景 | [详情](#t-006) |
| ☐ | T-007 | MainMenuScene 主菜单场景 | 待定 | 🔘未开始 | - | - | - | 继续/新游戏/设置/退出按钮 | [详情](#t-007) |
| ☐ | T-008 | HomeScene 家园场景(占位) | 待定 | 🔘未开始 | - | - | - | 空场景+基础UI | [详情](#t-008) |
| ☐ | T-009 | EventBus.gd 事件总线 | 待定 | 🔘未开始 | - | - | - | 全局信号定义 | [详情](#t-009) |

---

## 🟡 重要不紧急（P2）- 3条记录

| ☐ | 任务ID | 任务描述 | 任务执行人 | 进度 | 开始日期 | 预计完成日期 | 实际完成日期 | 备注 | 查看详情 |
|---|--------|----------|------------|------|----------|--------------|--------------|------|----------|
| ☐ | T-010 | PauseMenu 暂停菜单 | 待定 | 🔘未开始 | - | - | - | 继续/设置/返回主菜单 | [详情](#t-010) |
| ☐ | T-011 | 副本相关状态(占位) | 待定 | 🔘未开始 | - | - | - | TIME_MACHINE/MISSION_SELECT/MISSION/SETTLEMENT | [详情](#t-011) |
| ☐ | T-012 | 状态切换过渡动画 | 待定 | 🔘未开始 | - | - | - | 淡入淡出效果 | [详情](#t-012) |

---

## 🟢 不紧急不重要（P3）- 2条记录

| ☐ | 任务ID | 任务描述 | 任务执行人 | 进度 | 开始日期 | 预计完成日期 | 实际完成日期 | 备注 | 查看详情 |
|---|--------|----------|------------|------|----------|--------------|--------------|------|----------|
| ☐ | T-013 | 状态配置表外部化 | 待定 | 🔘未开始 | - | - | - | JSON配置文件 | [详情](#t-013) |
| ☐ | T-014 | 状态切换日志系统 | 待定 | 🔘未开始 | - | - | - | 调试用状态追踪 | [详情](#t-014) |

---

## 📊 进度统计

| 状态 | 数量 | 占比 |
|------|------|------|
| 🔘 未开始 | 14 | 100% |
| 🟡 进行中 | 0 | 0% |
| 🟢 已完成 | 0 | 0% |
| 🔴 已延期 | 0 | 0% |
| **总计** | **14** | - |

---

## 📋 任务详情

### T-001
**任务**：项目初始化与文件夹结构搭建  
**依赖**：无  
**产出物**：
- Godot 4.x 项目文件
- 文件夹结构（autoload/scenes/scripts/resources）
- project.godot 配置（分辨率1920x1080）
- 输入映射（pause、interact、move等）

### T-002
**任务**：GameManager.gd 状态机核心  
**依赖**：T-001  
**产出物**：
- GameState 枚举定义
- change_state() 方法
- state_changed 信号
- 状态处理器字典

### T-003
**任务**：SceneManager.gd 场景管理器  
**依赖**：T-001  
**产出物**：
- load_scene() 异步加载方法
- 加载进度信号
- 场景切换方法

### T-004
**任务**：BaseGameState.gd 状态基类  
**依赖**：T-001  
**产出物**：
- enter() 进入状态
- exit() 退出状态
- update() 每帧更新
- handle_input() 输入处理

### T-005
**任务**：BootScene 启动场景  
**依赖**：T-002, T-003, T-004  
**产出物**：
- BootScene.tscn 场景文件
- BootState.gd 状态脚本
- Logo显示（可跳过）
- 自动切换到主菜单

### T-006
**任务**：LoadingScreen 加载界面  
**依赖**：T-003  
**产出物**：
- LoadingScreen.tscn 场景文件
- 进度条UI
- 加载提示文字

### T-007
**任务**：MainMenuScene 主菜单场景  
**依赖**：T-002, T-004  
**产出物**：
- MainMenuScene.tscn 场景文件
- MainMenuState.gd 状态脚本
- 按钮：继续/新游戏/设置/退出

### T-008
**任务**：HomeScene 家园场景(占位)  
**依赖**：T-002, T-004  
**产出物**：
- HomeScene.tscn 占位场景
- HomeState.gd 状态脚本
- 基础HUD占位

### T-009
**任务**：EventBus.gd 事件总线  
**依赖**：T-001  
**产出物**：
- 全局信号定义
- 状态相关信号
- 游戏事件信号

### T-010
**任务**：PauseMenu 暂停菜单  
**依赖**：T-002, T-007  
**产出物**：
- PauseMenu.tscn 场景文件
- PauseState.gd 状态脚本
- ESC键暂停/继续

### T-011
**任务**：副本相关状态(占位)  
**依赖**：T-002, T-004  
**产出物**：
- TimeMachineState.gd
- MissionSelectState.gd
- LoadingState.gd
- MissionState.gd
- SettlementState.gd
- 对应占位UI

### T-012
**任务**：状态切换过渡动画  
**依赖**：T-003  
**产出物**：
- 淡入淡出效果
- TransitionLayer 节点

### T-013
**任务**：状态配置表外部化  
**依赖**：T-002  
**产出物**：
- state_config.json
- 配置加载逻辑

### T-014
**任务**：状态切换日志系统  
**依赖**：T-002  
**产出物**：
- 状态切换日志输出
- 调试面板（可选）

---

*更新日期：2025-12-02*
